#!/bin/bash

if [ $# != 4 ]
then
        echo "Usage : $0 nbclient nbproductor nbproductargent nbproductbronze"
				exit -1
fi

set -v

javac *.java




mkdir tProductor
mkdir tProductargent
mkdir tProductbronze


mkdir tClient

for i in Client ClientImpl ProductImpl Product_thread Product Client_thread 
do  cp $i.class tClient ; done

for i in Productor ProductImpl Product Product_thread
do  cp $i.class tProductor ; done

for i in Productargent ProductImpl Product Product_thread
do  cp $i.class tProductargent ; done

for i in Productbronze ProductImpl Product  Product_thread
do  cp $i.class tProductbronze ; done

cd tProductor
rmiregistry 6666 &
cd ..

cd tProductor
xterm -hold -e  java Productor 6666 &
cd ..

cd tProductargent
xterm -hold -e  java Productargent 6666 &
cd ..

cd tProductbronze
xterm -hold -e  java Productbronze 6666 &
cd ..

sleep 1

cd tClient
xterm -hold -e java Client localhost 6666 0 &
for i in `seq 1 $1 `;
do
	xterm -hold -e java Client localhost 6666 1 &
done
cd ..




